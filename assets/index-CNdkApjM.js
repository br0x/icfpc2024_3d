(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))o(_);new MutationObserver(_=>{for(const r of _)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(_){const r={};return _.integrity&&(r.integrity=_.integrity),_.referrerPolicy&&(r.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?r.credentials="include":_.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(_){if(_.ep)return;_.ep=!0;const r=n(_);fetch(_.href,r)}})();var ce,S,Ke,X,Ee,Ge,ve,Je,ke,me,ye,ee={},Qe=[],mt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,fe=Array.isArray;function z(e,t){for(var n in t)e[n]=t[n];return e}function we(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ge(e,t,n){var o,_,r,l={};for(r in t)r=="key"?o=t[r]:r=="ref"?_=t[r]:l[r]=t[r];if(arguments.length>2&&(l.children=arguments.length>3?ce.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)l[r]===void 0&&(l[r]=e.defaultProps[r]);return ie(e,l,o,_,null)}function ie(e,t,n,o,_){var r={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:_??++Ke,__i:-1,__u:0};return _==null&&S.vnode!=null&&S.vnode(r),r}function q(e){return e.children}function W(e,t){this.props=e,this.context=t}function G(e,t){if(t==null)return e.__?G(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?G(e):null}function et(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return et(e)}}function Me(e){(!e.__d&&(e.__d=!0)&&X.push(e)&&!se.__r++||Ee!==S.debounceRendering)&&((Ee=S.debounceRendering)||Ge)(se)}function se(){var e,t,n,o,_,r,l,s;for(X.sort(ve);e=X.shift();)e.__d&&(t=X.length,o=void 0,r=(_=(n=e).__v).__e,l=[],s=[],n.__P&&((o=z({},_)).__v=_.__v+1,S.vnode&&S.vnode(o),$e(n.__P,o,_,n.__n,n.__P.namespaceURI,32&_.__u?[r]:null,l,r??G(_),!!(32&_.__u),s),o.__v=_.__v,o.__.__k[o.__i]=o,rt(l,o,s),o.__e!=r&&et(o)),X.length>t&&X.sort(ve));se.__r=0}function tt(e,t,n,o,_,r,l,s,u,a,y){var i,g,d,b,P,A,$=o&&o.__k||Qe,c=t.length;for(u=yt(n,t,$,u),i=0;i<c;i++)(d=n.__k[i])!=null&&(g=d.__i===-1?ee:$[d.__i]||ee,d.__i=i,A=$e(e,d,g,_,r,l,s,u,a,y),b=d.__e,d.ref&&g.ref!=d.ref&&(g.ref&&Se(g.ref,null,d),y.push(d.ref,d.__c||b,d)),P==null&&b!=null&&(P=b),4&d.__u||g.__k===d.__k?u=nt(d,u,e):typeof d.type=="function"&&A!==void 0?u=A:b&&(u=b.nextSibling),d.__u&=-7);return n.__e=P,u}function yt(e,t,n,o){var _,r,l,s,u,a=t.length,y=n.length,i=y,g=0;for(e.__k=[],_=0;_<a;_++)(r=t[_])!=null&&typeof r!="boolean"&&typeof r!="function"?(s=_+g,(r=e.__k[_]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?ie(null,r,null,null,null):fe(r)?ie(q,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?ie(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=e,r.__b=e.__b+1,l=null,(u=r.__i=gt(r,n,s,i))!==-1&&(i--,(l=n[u])&&(l.__u|=2)),l==null||l.__v===null?(u==-1&&g--,typeof r.type!="function"&&(r.__u|=4)):u!==s&&(u==s-1?g--:u==s+1?g++:(u>s?g--:g++,r.__u|=4))):r=e.__k[_]=null;if(i)for(_=0;_<y;_++)(l=n[_])!=null&&!(2&l.__u)&&(l.__e==o&&(o=G(l)),ot(l,l));return o}function nt(e,t,n){var o,_;if(typeof e.type=="function"){for(o=e.__k,_=0;o&&_<o.length;_++)o[_]&&(o[_].__=e,t=nt(o[_],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=G(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function ue(e,t){return t=t||[],e==null||typeof e=="boolean"||(fe(e)?e.some(function(n){ue(n,t)}):t.push(e)),t}function gt(e,t,n,o){var _=e.key,r=e.type,l=n-1,s=n+1,u=t[n];if(u===null||u&&_==u.key&&r===u.type&&!(2&u.__u))return n;if((typeof r!="function"||r===q||_)&&o>(u!=null&&!(2&u.__u)?1:0))for(;l>=0||s<t.length;){if(l>=0){if((u=t[l])&&!(2&u.__u)&&_==u.key&&r===u.type)return l;l--}if(s<t.length){if((u=t[s])&&!(2&u.__u)&&_==u.key&&r===u.type)return s;s++}}return-1}function xe(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||mt.test(t)?n:n+"px"}function oe(e,t,n,o,_){var r;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||xe(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||xe(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")r=t!==(t=t.replace(Je,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?o?n.u=o.u:(n.u=ke,e.addEventListener(t,r?ye:me,r)):e.removeEventListener(t,r?ye:me,r);else{if(_=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Ce(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=ke++;else if(t.t<n.u)return;return n(S.event?S.event(t):t)}}}function $e(e,t,n,o,_,r,l,s,u,a){var y,i,g,d,b,P,A,$,c,f,m,h,p,w,M,H,T,U=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),r=[s=t.__e=n.__e]),(y=S.__b)&&y(t);e:if(typeof U=="function")try{if($=t.props,c="prototype"in U&&U.prototype.render,f=(y=U.contextType)&&o[y.__c],m=y?f?f.props.value:y.__:o,n.__c?A=(i=t.__c=n.__c).__=i.__E:(c?t.__c=i=new U($,m):(t.__c=i=new W($,m),i.constructor=U,i.render=kt),f&&f.sub(i),i.props=$,i.state||(i.state={}),i.context=m,i.__n=o,g=i.__d=!0,i.__h=[],i._sb=[]),c&&i.__s==null&&(i.__s=i.state),c&&U.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=z({},i.__s)),z(i.__s,U.getDerivedStateFromProps($,i.__s))),d=i.props,b=i.state,i.__v=t,g)c&&U.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),c&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(c&&U.getDerivedStateFromProps==null&&$!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps($,m),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate($,i.__s,m)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(i.props=$,i.state=i.__s,i.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(O){O&&(O.__=t)}),h=0;h<i._sb.length;h++)i.__h.push(i._sb[h]);i._sb=[],i.__h.length&&l.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate($,i.__s,m),c&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,P)})}if(i.context=m,i.props=$,i.__P=e,i.__e=!1,p=S.__r,w=0,c){for(i.state=i.__s,i.__d=!1,p&&p(t),y=i.render(i.props,i.state,i.context),M=0;M<i._sb.length;M++)i.__h.push(i._sb[M]);i._sb=[]}else do i.__d=!1,p&&p(t),y=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++w<25);i.state=i.__s,i.getChildContext!=null&&(o=z(z({},o),i.getChildContext())),c&&!g&&i.getSnapshotBeforeUpdate!=null&&(P=i.getSnapshotBeforeUpdate(d,b)),s=tt(e,fe(H=y!=null&&y.type===q&&y.key==null?y.props.children:y)?H:[H],t,n,o,_,r,l,s,u,a),i.base=t.__e,t.__u&=-161,i.__h.length&&l.push(i),A&&(i.__E=i.__=null)}catch(O){if(t.__v=null,u||r!=null)if(O.then){for(t.__u|=u?160:128;s&&s.nodeType===8&&s.nextSibling;)s=s.nextSibling;r[r.indexOf(s)]=null,t.__e=s}else for(T=r.length;T--;)we(r[T]);else t.__e=n.__e,t.__k=n.__k;S.__e(O,t,n)}else r==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=bt(n.__e,t,n,o,_,r,l,u,a);return(y=S.diffed)&&y(t),128&t.__u?void 0:s}function rt(e,t,n){for(var o=0;o<n.length;o++)Se(n[o],n[++o],n[++o]);S.__c&&S.__c(t,e),e.some(function(_){try{e=_.__h,_.__h=[],e.some(function(r){r.call(_)})}catch(r){S.__e(r,_.__v)}})}function bt(e,t,n,o,_,r,l,s,u){var a,y,i,g,d,b,P,A=n.props,$=t.props,c=t.type;if(c==="svg"?_="http://www.w3.org/2000/svg":c==="math"?_="http://www.w3.org/1998/Math/MathML":_||(_="http://www.w3.org/1999/xhtml"),r!=null){for(a=0;a<r.length;a++)if((d=r[a])&&"setAttribute"in d==!!c&&(c?d.localName===c:d.nodeType===3)){e=d,r[a]=null;break}}if(e==null){if(c===null)return document.createTextNode($);e=document.createElementNS(_,c,$.is&&$),s&&(S.__m&&S.__m(t,r),s=!1),r=null}if(c===null)A===$||s&&e.data===$||(e.data=$);else{if(r=r&&ce.call(e.childNodes),A=n.props||ee,!s&&r!=null)for(A={},a=0;a<e.attributes.length;a++)A[(d=e.attributes[a]).name]=d.value;for(a in A)if(d=A[a],a!="children"){if(a=="dangerouslySetInnerHTML")i=d;else if(!(a in $)){if(a=="value"&&"defaultValue"in $||a=="checked"&&"defaultChecked"in $)continue;oe(e,a,null,d,_)}}for(a in $)d=$[a],a=="children"?g=d:a=="dangerouslySetInnerHTML"?y=d:a=="value"?b=d:a=="checked"?P=d:s&&typeof d!="function"||A[a]===d||oe(e,a,d,A[a],_);if(y)s||i&&(y.__html===i.__html||y.__html===e.innerHTML)||(e.innerHTML=y.__html),t.__k=[];else if(i&&(e.innerHTML=""),tt(e,fe(g)?g:[g],t,n,o,c==="foreignObject"?"http://www.w3.org/1999/xhtml":_,r,l,r?r[0]:n.__k&&G(n,0),s,u),r!=null)for(a=r.length;a--;)we(r[a]);s||(a="value",c==="progress"&&b==null?e.removeAttribute("value"):b!==void 0&&(b!==e[a]||c==="progress"&&!b||c==="option"&&b!==A[a])&&oe(e,a,b,A[a],_),a="checked",P!==void 0&&P!==e[a]&&oe(e,a,P,A[a],_))}return e}function Se(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(_){S.__e(_,n)}}function ot(e,t,n){var o,_;if(S.unmount&&S.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||Se(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){S.__e(r,t)}o.base=o.__P=null}if(o=e.__k)for(_=0;_<o.length;_++)o[_]&&ot(o[_],t,n||typeof e.type!="function");n||we(e.__e),e.__c=e.__=e.__e=void 0}function kt(e,t,n){return this.constructor(e,n)}function wt(e,t,n){var o,_,r,l;t===document&&(t=document.documentElement),S.__&&S.__(e,t),_=(o=typeof n=="function")?null:t.__k,r=[],l=[],$e(t,e=(!o&&n||t).__k=ge(q,null,[e]),_||ee,ee,t.namespaceURI,!o&&n?[n]:_?null:t.firstChild?ce.call(t.childNodes):null,r,!o&&n?n:_?_.__e:t.firstChild,o,l),rt(r,e,l)}ce=Qe.slice,S={__e:function(e,t,n,o){for(var _,r,l;t=t.__;)if((_=t.__c)&&!_.__)try{if((r=_.constructor)&&r.getDerivedStateFromError!=null&&(_.setState(r.getDerivedStateFromError(e)),l=_.__d),_.componentDidCatch!=null&&(_.componentDidCatch(e,o||{}),l=_.__d),l)return _.__E=_}catch(s){e=s}throw e}},Ke=0,W.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=z({},this.state),typeof e=="function"&&(e=e(z({},n),this.props)),e&&z(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Me(this))},W.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Me(this))},W.prototype.render=q,X=[],Ge=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ve=function(e,t){return e.__v.__b-t.__v.__b},se.__r=0,Je=/(PointerCapture)$|Capture$/i,ke=0,me=Ce(!1),ye=Ce(!0);var $t=0;function E(e,t,n,o,_,r){t||(t={});var l,s,u=t;"ref"in t&&(l=t.ref,delete t.ref);var a={type:e,props:u,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--$t,__i:-1,__u:0,__source:_,__self:r};if(typeof e=="function"&&(l=e.defaultProps))for(s in l)u[s]===void 0&&(u[s]=l[s]);return S.vnode&&S.vnode(a),a}var te,L,he,Pe,ae=0,_t=[],B=S,Ne=B.__b,Ie=B.__r,Le=B.diffed,Be=B.__c,He=B.unmount,Te=B.__;function Ae(e,t){B.__h&&B.__h(L,e,ae||t),ae=0;var n=L.__H||(L.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function R(e){return ae=1,St(st,e)}function St(e,t,n){var o=Ae(te++,2);if(o.t=e,!o.__c&&(o.__=[n?n(t):st(void 0,t),function(s){var u=o.__N?o.__N[0]:o.__[0],a=o.t(u,s);u!==a&&(o.__N=[a,o.__[1]],o.__c.setState({}))}],o.__c=L,!L.u)){var _=function(s,u,a){if(!o.__c.__H)return!0;var y=o.__c.__H.__.filter(function(g){return!!g.__c});if(y.every(function(g){return!g.__N}))return!r||r.call(this,s,u,a);var i=o.__c.props!==s;return y.forEach(function(g){if(g.__N){var d=g.__[0];g.__=g.__N,g.__N=void 0,d!==g.__[0]&&(i=!0)}}),r&&r.call(this,s,u,a)||i};L.u=!0;var r=L.shouldComponentUpdate,l=L.componentWillUpdate;L.componentWillUpdate=function(s,u,a){if(this.__e){var y=r;r=void 0,_(s,u,a),r=y}l&&l.call(this,s,u,a)},L.shouldComponentUpdate=_}return o.__N||o.__}function it(e,t){var n=Ae(te++,3);!B.__s&&lt(n.__H,t)&&(n.__=e,n.i=t,L.__H.__h.push(n))}function At(e){return ae=5,Et(function(){return{current:e}},[])}function Et(e,t){var n=Ae(te++,7);return lt(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Mt(){for(var e;e=_t.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(le),e.__H.__h.forEach(be),e.__H.__h=[]}catch(t){e.__H.__h=[],B.__e(t,e.__v)}}B.__b=function(e){L=null,Ne&&Ne(e)},B.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Te&&Te(e,t)},B.__r=function(e){Ie&&Ie(e),te=0;var t=(L=e.__c).__H;t&&(he===L?(t.__h=[],L.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(le),t.__h.forEach(be),t.__h=[],te=0)),he=L},B.diffed=function(e){Le&&Le(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(_t.push(t)!==1&&Pe===B.requestAnimationFrame||((Pe=B.requestAnimationFrame)||xt)(Mt)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),he=L=null},B.__c=function(e,t){t.some(function(n){try{n.__h.forEach(le),n.__h=n.__h.filter(function(o){return!o.__||be(o)})}catch(o){t.some(function(_){_.__h&&(_.__h=[])}),t=[],B.__e(o,n.__v)}}),Be&&Be(e,t)},B.unmount=function(e){He&&He(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{le(o)}catch(_){t=_}}),n.__H=void 0,t&&B.__e(t,n.__v))};var Ue=typeof requestAnimationFrame=="function";function xt(e){var t,n=function(){clearTimeout(o),Ue&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);Ue&&(t=requestAnimationFrame(n))}function le(e){var t=L,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),L=t}function be(e){var t=L;e.__c=e.__(),L=t}function lt(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function st(e,t){return typeof t=="function"?t(e):t}class C{constructor(t=" ",n=!1){this.value=t,this.dirty=n}toString(){return typeof this.value=="bigint"?this.value.toString():this.value===" "?" ":this.value}}var k=(e=>(e.Empty=" ",e.Left="<",e.Right=">",e.Up="^",e.Down="v",e.Add="+",e.Sub="-",e.Mul="*",e.Div="/",e.Mod="%",e.Warp="@",e.Eq="=",e.NEq="#",e.Solve="S",e.A="A",e.B="B",e))(k||{});const ut=new Set(Object.values(k));function ne(e){if(e.size===0)return[0,0,0,0];let t=-1/0,n=-1/0,o=1/0,_=1/0;for(const r of e.keys()){const[l,s]=r.split(",").map(Number);t=Math.max(t,l),n=Math.max(n,s),o=Math.min(o,l),_=Math.min(_,s)}return[t-o+1,n-_+1,o,_]}function Ct(e){if(e.size===0)return[];const[t,n,o,_]=ne(e),r=Array(n).fill(null).map(()=>Array(t).fill(null).map(()=>new C(k.Empty)));for(const[l,s]of e){const[u,a]=l.split(",").map(Number);r[a-_][u-o]=s}return r}function j(e,t){return e.get(`${t.x},${t.y}`)}function Pt(e,t){return e.has(`${t.x},${t.y}`)}function De(e){const t=new Map;return e.replace(/^solve.*?\n/i,"").split(`
`).forEach((n,o)=>{n.trim().split(/\s+/).forEach((_,r)=>{_!=="."&&_!==""&&t.set(`${r},${o}`,new C(ut.has(_)?_:BigInt(_)))})}),t}function Re(e){if(e.size===0)return".";let t=1/0,n=1/0,o=-1/0,_=-1/0;for(const l of e.keys()){const[s,u]=l.split(",").map(Number);t=Math.min(t,s),o=Math.max(o,s),n=Math.min(n,u),_=Math.max(_,u)}const r=[];for(let l=n;l<=_;l++){const s=[];for(let u=t;u<=o;u++){const a=e.get(`${u},${l}`);s.push(a?a.value===k.Empty?".":a.toString():".")}for(;s.length>0&&s[s.length-1]===".";)s.pop();r.push(s.length>0?s.join(" "):".")}for(;r.length>0&&r[r.length-1]===".";)r.pop();return r.join(`
`)||"."}function Nt(e,t){var n,o;if(e.size!==t.size)return!1;for(const _ of e.keys())if(!t.has(_)||((n=e.get(_))==null?void 0:n.value)!==((o=t.get(_))==null?void 0:o.value))return!1;return!0}var Q;(e=>{function t(o,_,r){var s;let l=new Map;for(const u of o.keys()){const a=(s=o.get(u))==null?void 0:s.value;a===k.A?l.set(u,new C(BigInt(_))):a===k.B?l.set(u,new C(BigInt(r))):l.set(u,new C(a))}return l}e.initialize=t;function n(o,_){var A,$;let r=_[o][0],l,s=new Map;for(const c of r.keys())r.set(c,new C((A=r.get(c))==null?void 0:A.value));function u(c,f,m){var p,w;const h=`${c},${f}`;if(((p=r.get(h))==null?void 0:p.value)===k.Solve){let M=m.value;if(typeof M=="bigint"){if(l!==void 0&&l!==M)throw new Error("TooManySubmits");l=M}}if((w=s.get(h))!=null&&w.dirty)throw new Error(`multiple writes to ${h}`);s.set(h,new C(m.value,!0))}function a(c,f,m){var w;const h=`${c},${f}`;let p=m.value;if(((w=s.get(h))==null?void 0:w.value)===k.Solve&&typeof p=="bigint"){if(l!==void 0&&l!==p)throw new Error("TooManySubmits");l=p}s.set(h,new C(p,!0))}function y(c,f,m,h){const p=c-m,w=f-h;if(m=c+m,h=f+h,Pt(r,{x:p,y:w})){const M=j(r,{x:p,y:w});r.set(`${p},${w}`,new C(M.value,!0)),u(m,h,M)}}function i(c,f,m){const h=j(r,{x:c-1,y:f}),p=j(r,{x:c,y:f-1});if(typeof(h==null?void 0:h.value)!="bigint"||typeof(p==null?void 0:p.value)!="bigint")return;const w=h.value,M=p.value;r.set(`${c-1},${f}`,new C(w,!0)),r.set(`${c},${f-1}`,new C(M,!0));const H=m(w,M);if(H===void 0)return;const T=new C(H,!0);u(c,f+1,T),u(c+1,f,T)}function g(c,f,m){const h=j(r,{x:c-1,y:f}),p=j(r,{x:c,y:f-1});if(typeof(h==null?void 0:h.value)!="bigint"||typeof(p==null?void 0:p.value)!="bigint")return;const w=h.value,M=p.value;if(M==0n)return;r.set(`${c-1},${f}`,new C(w,!0)),r.set(`${c},${f-1}`,new C(M,!0));const H=m(w,M);if(H===void 0)return;const T=new C(H,!0);u(c,f+1,T),u(c+1,f,T)}function d(c,f,m){var w,M;const h=(w=j(r,{x:c-1,y:f}))==null?void 0:w.value,p=(M=j(r,{x:c,y:f-1}))==null?void 0:M.value;if(!(h===void 0||p===void 0)){if(m){if(h!==p)return}else if(h===p)return;r.set(`${c-1},${f}`,new C(h,!0)),r.set(`${c},${f-1}`,new C(p,!0)),u(c,f+1,new C(h,!0)),u(c+1,f,new C(p,!0))}}const b=[];function P(c,f){var M,H,T,U;const m=(M=r.get(`${c-1},${f}`))==null?void 0:M.value;if(typeof m!="bigint")return;const h=(H=r.get(`${c+1},${f}`))==null?void 0:H.value;if(typeof h!="bigint")return;const p=(T=r.get(`${c},${f-1}`))==null?void 0:T.value;if(p===void 0||p===k.Empty)return;const w=(U=r.get(`${c},${f+1}`))==null?void 0:U.value;typeof w=="bigint"&&(r.set(`${c-1},${f}`,new C(m,!0)),r.set(`${c+1},${f}`,new C(h,!0)),r.set(`${c},${f-1}`,new C(p,!0)),r.set(`${c},${f+1}`,new C(w,!0)),b.push({x:c-Number(m),y:f-Number(h),v:p,dt:Number(w)}))}for(const c of r.keys()){const[f,m]=c.split(",").map(Number),h=r.get(c);switch(h.value){case k.Empty:break;case k.A:break;case k.B:break;case k.Up:y(f,m,0,-1);break;case k.Down:y(f,m,0,1);break;case k.Left:y(f,m,-1,0);break;case k.Right:y(f,m,1,0);break;case k.Add:i(f,m,(p,w)=>p+w);break;case k.Sub:i(f,m,(p,w)=>p-w);break;case k.Mul:i(f,m,(p,w)=>p*w);break;case k.Div:g(f,m,(p,w)=>p/w);break;case k.Mod:g(f,m,(p,w)=>p%w);break;case k.Eq:d(f,m,!0);break;case k.NEq:d(f,m,!1);break;case k.Solve:break;case k.Warp:P(f,m);break;default:if(typeof h.value=="bigint")break;throw new Error(`unhandled op: ${h}`)}}for(const c of r.keys()){const f=r.get(c);if(f.dirty)continue;const m=f.value;switch(m){case k.Up:case k.Down:case k.Left:case k.Right:case k.Add:case k.Sub:case k.Mul:case k.Div:case k.Mod:case k.Eq:case k.NEq:case k.Solve:case k.Warp:s.set(c,new C(m));break;default:if(typeof m=="bigint"){($=s.get(c))!=null&&$.dirty||s.set(c,new C(m));break}throw new Error(`unexpected op: ${f}`)}}if(b.length>0){let c=b[0].dt,f=b[0].x,m=b[0].y,h=b[0].v;if(c<1)throw new Error("invalid dt");if(b.some(p=>p.dt!==c))throw new Error("time travels must all have the same dt");if(b.some(p=>p.x===f&&p.y===m&&p.v!==h))throw new Error("ConflictingWarps");for(let p=0;p<=c;p++)s=_.pop()[0];for(let{x:p,y:w,v:M}of b)a(p,w,new C(M));_.push([s,void 0])}return[s,l]}e.step=n})(Q||(Q={}));function We(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var o in t)if(o!=="__source"&&e[o]!==t[o])return!0;return!1}function Fe(e,t){this.props=e,this.context=t}(Fe.prototype=new W).isPureReactComponent=!0,Fe.prototype.shouldComponentUpdate=function(e,t){return We(this.props,e)||We(this.state,t)};var ze=S.__b;S.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),ze&&ze(e)};var It=S.__e;S.__e=function(e,t,n,o){if(e.then){for(var _,r=t;r=r.__;)if((_=r.__c)&&_.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),_.__c(e,t)}It(e,t,n,o)};var qe=S.unmount;function at(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(o){typeof o.__c=="function"&&o.__c()}),e.__c.__H=null),(e=function(o,_){for(var r in _)o[r]=_[r];return o}({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(o){return at(o,t,n)})),e}function ct(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(o){return ct(o,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function de(){this.__u=0,this.o=null,this.__b=null}function ft(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function _e(){this.i=null,this.l=null}S.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),qe&&qe(e)},(de.prototype=new W).__c=function(e,t){var n=t.__c,o=this;o.o==null&&(o.o=[]),o.o.push(n);var _=ft(o.__v),r=!1,l=function(){r||(r=!0,n.__R=null,_?_(s):s())};n.__R=l;var s=function(){if(!--o.__u){if(o.state.__a){var u=o.state.__a;o.__v.__k[0]=ct(u,u.__c.__P,u.__c.__O)}var a;for(o.setState({__a:o.__b=null});a=o.o.pop();)a.forceUpdate()}};o.__u++||32&t.__u||o.setState({__a:o.__b=o.__v.__k[0]}),e.then(l,l)},de.prototype.componentWillUnmount=function(){this.o=[]},de.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=at(this.__b,n,o.__O=o.__P)}this.__b=null}var _=t.__a&&ge(q,null,e.fallback);return _&&(_.__u&=-33),[ge(q,null,t.__a?null:e.children),_]};var Oe=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(_e.prototype=new W).__a=function(e){var t=this,n=ft(t.__v),o=t.l.get(e);return o[0]++,function(_){var r=function(){t.props.revealOrder?(o.push(_),Oe(t,e,o)):_()};n?n(r):r()}},_e.prototype.render=function(e){this.i=null,this.l=new Map;var t=ue(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},_e.prototype.componentDidUpdate=_e.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Oe(e,n,t)})};var Lt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Bt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ht=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Tt=/[A-Z0-9]/g,Ut=typeof document<"u",Dt=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};W.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(W.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Ve=S.event;function Rt(){}function Wt(){return this.cancelBubble}function Ft(){return this.defaultPrevented}S.event=function(e){return Ve&&(e=Ve(e)),e.persist=Rt,e.isPropagationStopped=Wt,e.isDefaultPrevented=Ft,e.nativeEvent=e};var zt={enumerable:!1,configurable:!0,get:function(){return this.class}},je=S.vnode;S.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,o=t.type,_={},r=o.indexOf("-")===-1;for(var l in n){var s=n[l];if(!(l==="value"&&"defaultValue"in n&&s==null||Ut&&l==="children"&&o==="noscript"||l==="class"||l==="className")){var u=l.toLowerCase();l==="defaultValue"&&"value"in n&&n.value==null?l="value":l==="download"&&s===!0?s="":u==="translate"&&s==="no"?s=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?l="ondblclick":u!=="onchange"||o!=="input"&&o!=="textarea"||Dt(n.type)?u==="onfocus"?l="onfocusin":u==="onblur"?l="onfocusout":Ht.test(l)&&(l=u):u=l="oninput":r&&Bt.test(l)?l=l.replace(Tt,"-$&").toLowerCase():s===null&&(s=void 0),u==="oninput"&&_[l=u]&&(l="oninputCapture"),_[l]=s}}o=="select"&&_.multiple&&Array.isArray(_.value)&&(_.value=ue(n.children).forEach(function(a){a.props.selected=_.value.indexOf(a.props.value)!=-1})),o=="select"&&_.defaultValue!=null&&(_.value=ue(n.children).forEach(function(a){a.props.selected=_.multiple?_.defaultValue.indexOf(a.props.value)!=-1:_.defaultValue==a.props.value})),n.class&&!n.className?(_.class=n.class,Object.defineProperty(_,"className",zt)):(n.className&&!n.class||n.class&&n.className)&&(_.class=_.className=n.className),t.props=_}(e),e.$$typeof=Lt,je&&je(e)};var Xe=S.__r;S.__r=function(e){Xe&&Xe(e),e.__c};var Ye=S.diffed;S.diffed=function(e){Ye&&Ye(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};var Ze=function(e,t){return e(t)};function qt({width:e,height:t,draw:n,getCellContent:o,step:_}){const r=At(null),[l,s]=R(null),[u,a]=R(null);return it(()=>{const g=r.current;if(!g)return;const d=g.getContext("2d");d&&n(d)},[n,_]),E("div",{style:{position:"relative"},children:[E("canvas",{ref:r,width:e,height:t,onMouseMove:g=>{const d=r.current;if(!d)return;const[b,P,A,$]=ne(_[0]),c=Math.max(b,P),f=Math.floor(F/c),m=Math.floor((F-P*f)/2),h=Math.floor((F-b*f)/2),p=d.getBoundingClientRect(),w=g.clientX-p.left,M=g.clientY-p.top,H=Math.floor((w-h)/f)+A,T=Math.floor((M-m)/f)+$;if(A<=H&&H<A+b&&$<=T&&T<P){const U=o(H,T);s(U||null)}a({x:w,y:M})},onMouseLeave:()=>{s(null),a(null)}}),l&&u&&E("div",{style:{position:"absolute",left:`${u.x+10}px`,top:`${u.y+10}px`,background:"white",border:"1px solid black",padding:"2px",zIndex:1e3},children:l})]})}const F=480;function Ot(e){const{board:t}=e,[n,o]=ne(t),_=e.edit?0:void 0,r=Ct(t).map((s,u)=>{const a=s.map((y,i)=>{const g=y.toString();return E("td",{"data-x":i,"data-y":u,tabindex:_,children:g})});return E("tr",{children:a})});function l(s){var g,d,b,P,A,$,c,f,m;const u=s.target;if(u.tagName!=="TD")return;s.preventDefault();let[a,y]=[parseInt(u.dataset.x),parseInt(u.dataset.y)];const i=u.parentElement.parentElement;switch(s.key){case"ArrowUp":(d=(g=i.rows[y-1])==null?void 0:g.cells[a])==null||d.focus();break;case"ArrowDown":(P=(b=i.rows[y+1])==null?void 0:b.cells[a])==null||P.focus();break;case"ArrowLeft":($=(A=i.rows[y])==null?void 0:A.cells[a-1])==null||$.focus();break;case"ArrowRight":(f=(c=i.rows[y])==null?void 0:c.cells[a+1])==null||f.focus();break}if(e.edit){let h;switch(s.key){case"a":h=k.A;break;case"b":h=k.B;break;case"s":h=k.Solve;break;case"~":{const p=(m=t.get(`${a},${y}`))==null?void 0:m.value;typeof p=="bigint"&&(h=-p);break}case"Backspace":h=k.Empty;break;case"ArrowDown":(y=o)&&(h=k.Empty,y+=1);break;case"ArrowRight":(a=n)&&(h=k.Empty,a+=1);break;default:ut.has(s.key)&&(h=s.key),s.key>="0"&&s.key<="9"&&(h=BigInt(s.key))}h!==void 0&&e.edit(a,y,new C(h))}}return E("table",{class:"grid",onKeyDown:l,children:E("tbody",{children:r})})}function Vt(){const[e,t]=R(0),[n,o]=R(0),[_,r]=R(De(decodeURIComponent(".%20.%20.%20.%20.%20.%2020%0A.%20.%20A%20.%20.%20.%20%3D%20.%20>%0A.%201%20%3D%20.%20.%20%5E%20.%20.%206%20%40%20-10%0A.%201%20S%20.%20<%201%20>%20.%20.%203%0A.%20%23%20.%20%2B%20.%20.%20.%20*%0A%5E%20.%20.%203%20>%20.%20%5E%20.%20>%0A7%20.%20-2%20%40%203%20v%201%20.%203%20%40%200%0A.%20.%20<%20.%20<%201%20*%20.%20.%203%20A%0A1%20*%20.%20.%20-20%20.%20.%20.%200%200%20%3D%0A.%20.%20.%201%20*%20.%20%2F%20.%20-%20.%20S%0A-4%20%40%203%20v%0A.%203%20.%20.%20>%20.%20.%208%20%40%20-4%20A%0A.%20.%20.%20.%20A%20*%2025%20.%203%20-1%20%3D%0A.%20>%20.%20%2F%20.%2040%20*%20.%20>%20.%20S%0A%5E%20.%20v%20S%202%20%40%20.%20*%20.%20*%0A0%20.%20.%20.%20.%203%20%5E%0A.%20-6%20%40%208%205%20>%20.%20.%209%20%40%208%0A.%20.%203%20.%20.%20.%20.%20.%20.%203"))),[l,s]=ne(_),[u,a]=R(""),[y,i]=R(0),[g,d]=R(0),[b,P]=R([h()]),[A,$]=R(h());function c(v){window.history.replaceState(null,"","?"+encodeURIComponent(Re(v))),r(v),i(0),d(0);const N=h();P([N]),$(N),a("")}function f(v,N,x){_.set(`${v},${N}`,x),c(_)}it(()=>{const v=h();P([v]),$(v)},[e,n]);function m(v,N){const x=parseInt(v.target.value,10);isNaN(x)||(N(x),i(0),a(""))}function h(){return[Q.initialize(_,e,n),void 0]}function p(v){m(v,t)}function w(v){m(v,o)}const M=v=>{const[N,x,V,Y]=ne(A[0]),J=Math.max(N,x),I=Math.floor(F/J),re=I*J,Z=Math.floor((F-x*I)/2),K=Math.floor((F-N*I)/2);v.clearRect(K,Z,re,re),v.strokeStyle="#000",v.lineWidth=1;for(let D=0;D<=N;D++)v.beginPath(),v.moveTo(K+D*I+.5,Z),v.lineTo(K+D*I+.5,Z+I*x),v.stroke();for(let D=0;D<=x;D++)v.beginPath(),v.moveTo(K,Z+D*I+.5),v.lineTo(K+I*N,Z+D*I+.5),v.stroke();v.font="16px Arial",v.textAlign="center",v.textBaseline="middle";for(const[D,ht]of A[0]){const[dt,vt]=D.split(",").map(Number);let pe=ht.toString();v.measureText(pe).width>I-2&&(pe="…"),v.fillText(pe,K+(dt-V)*I+I/2,Z+(vt-Y)*I+I/2)}};function H(){i(v=>{let N;if(b.length>v+1)N=b[v+1],d(x=>x+1);else try{N=Q.step(v,b),b.length==v+1?P(x=>[...x,N]):(v=b.length-2,P(b)),d(x=>x+1)}catch(x){Ze(()=>{a("Error: "+x.message)}),N=b[v],v--}return $(N),typeof N[1]=="bigint"?Ze(()=>{a("Result: "+N[1])}):a(""),v+1})}function T(){y!=0&&(d(v=>v-1),i(v=>(v--,$(b[v]),v)),a(""))}function U(){let v=y,N=g,x=[...b],V=A,Y="";for(let J=0;J<100;J++){let I;if(x.length>v+1)I=x[v+1],N++;else try{I=Q.step(v,x),x.length==v+1?x.push(I):v=x.length-2,N++}catch(re){Y="Error: "+re.message,I=x[v];break}if(v++,typeof I[1]=="bigint"){Y="Result: "+I[1];break}if(Nt(V[0],I[0])){Y="Error: nothing to reduce";break}V=I}i(v),d(N),P(x),$(V),a(Y)}function O(v){v.preventDefault();const x=v.target.elements.namedItem("text").value,V=De(x);c(V)}const pt=(v,N)=>{const x=A[0].get(`${v},${N}`);return x?x.toString():void 0};return E(q,{children:E("div",{class:"container",children:[E("div",{class:"left-block",children:[E("form",{onSubmit:O,children:[E("textarea",{name:"text",rows:s,cols:l*2,children:Re(_)}),E("br",{}),E("input",{class:"load-button",type:"submit",value:"load"})]}),E("p",{children:[E("label",{children:["A: ",E("input",{size:4,id:"a",value:e,onInput:p})]}),E("br",{}),E("br",{}),E("label",{children:["B: ",E("input",{size:4,id:"b",value:n,onInput:w})]})]})]}),E("div",{class:"mid-block",children:E(Ot,{board:_,edit:f})}),E("div",{class:"right-block",children:[E(qt,{width:F,height:F,draw:M,getCellContent:pt,step:A}),E("div",{class:"button-group",children:[E("button",{onClick:T,children:"Step <"}),E("button",{onClick:H,children:"Step >"}),E("button",{onClick:U,children:"Run / Stop"})]}),E("p",{children:["Universal Time = ",y,"; Local Time = ",g]}),E("p",{children:u})]})]})})}wt(E(Vt,{}),document.getElementById("app"));
